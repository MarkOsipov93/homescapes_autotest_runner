name: Homescapes UI Autotests
run-name: ðŸ¤– Running Homescapes UI Autotests
on: 
  workflow_dispatch:
    inputs:     
      TEST_ENV: 
        description: Just for test
        default: "123456"
jobs:
  iOS-QA-CI-TF:
    strategy:
      matrix:
        runner: [aqa_hs_0]
    runs-on: ${{ matrix.runner }}
    steps:
      - name: TestQaCI
        shell: bash -l {0}
        env: 
          LANG: "en_US.UTF-8"
          LANGUAG: "en_US.UTF-8"
          LC_ALL: "en_US.UTF-8"
          TEST_ENV: "${{github.event.inputs.TEST_ENV}}"
        run: |
          export ANDROID_HOME=$HOME/Library/Android/sdk
          export PATH=$ANDROID_HOME/tools:$PATH
          export PATH=$ANDROID_HOME/platform-tools:$PATH
          rm -rf homescapes_autotests
          git clone -b mosipov/teamcity_debug git@github.com:Playrix/homescapes_autotests.git
          cd homescapes_autotests
          pyenv local 3.11.6
          python -m venv venv
          source ./venv/bin/activate
          pip3 install --upgrade pip
          pip3 install -r ./requirements.txt
          pip3 install --extra-index-url https://nexus.local.playrix.com/repository/playrix-pypi/simple autotest_client==0.1.10 --no-deps
          mkdir app
          ./experimental/runTests.py --only-testing 8075 --platform android --parallel-threads 1 --teamcity-build-id 18408273 --teamcity-user mark-o --teamcity-pass "FZBHvt38u10726$4"

